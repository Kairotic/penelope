#!/usr/bin/python

import serial
import re



devname = "/dev/serial/by-id/usb-Arduino__www.arduino.cc__0043_557363239393515181E2-if00"

pat = re.compile("(\+|\-)(\d+)\s*([\d\.]+)?\s*([\d\.]+)?")

with serial.Serial(devname, 115200, timeout=1) as ser:
    print("opened serial port " + ser.name)

    while True:
        l = ser.readline()
        if l:
            print l
            m = re.search(pat, l)
            if m:
                if m.group(1) == "+":
                    n = int(m.group(2))
                    filtered = int(m.group(3))
                    baseline = int(m.group(4))
                    
                print("%s %d %f %f" % (m.group(1), int(m.group(2)), int(m.group(3)), int(m.group(4))))

            
    target = liblo.Address(6010)
    liblo.send(target,
               "/play",
               "bd", 
               0, # offset
               
    )

offset
  
start
end
speed
pan
velocity
  char *vowel_s
cutoff
resonance
accelerate
shape
  
gain
  int cutgroup

delay
delaytime
delayfeedback
  
crush
  int coarse
hcutoff
hresonance
bandf
bandq

  char *unit_name
  int sample_loop
  int sample_n

attack
hold
release
